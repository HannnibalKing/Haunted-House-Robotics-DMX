<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Haunted House Robotics Showcase</title>
    <style>
      :root {
        color-scheme: dark;
        --bg: #08080b;
        --panel: rgba(20, 20, 32, 0.85);
        --accent: #ff5f5f;
        --accent-2: #7c5cff;
        --text: #f4f6ff;
        --muted: #9ba1bf;
        --border: rgba(255, 255, 255, 0.08);
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        font-family: "Segoe UI", system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
        background: radial-gradient(circle at 20% 20%, rgba(124, 92, 255, 0.1), transparent 60%),
          radial-gradient(circle at 80% 0%, rgba(255, 95, 95, 0.15), transparent 55%), var(--bg);
        color: var(--text);
        line-height: 1.6;
      }

      header {
        padding: 80px 20px 40px;
        text-align: center;
        position: relative;
        overflow: hidden;
      }

      header::after {
        content: "";
        position: absolute;
        inset: -120px;
        background: radial-gradient(circle, rgba(255, 95, 95, 0.08), transparent 60%);
        filter: blur(80px);
        z-index: -1;
      }

      h1 {
        font-size: clamp(2.5rem, 5vw, 3.75rem);
        margin-bottom: 16px;
        letter-spacing: 0.06em;
        text-transform: uppercase;
      }

      h2 {
        font-size: clamp(1.75rem, 3.5vw, 2.6rem);
        margin-bottom: 10px;
      }

      p.lead {
        max-width: 720px;
        margin: 0 auto 28px;
        color: var(--muted);
        font-size: 1.1rem;
      }

      .cta {
        display: inline-flex;
        gap: 12px;
      }

      .cta a {
        padding: 12px 22px;
        border-radius: 999px;
        font-weight: 600;
        text-decoration: none;
        color: var(--text);
        border: 1px solid transparent;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
      }

      .cta a.primary {
        background: linear-gradient(135deg, var(--accent), var(--accent-2));
        box-shadow: 0 12px 30px rgba(124, 92, 255, 0.25);
      }

      .cta a.secondary {
        border-color: var(--border);
        background: rgba(255, 255, 255, 0.04);
      }

      .cta a:hover {
        transform: translateY(-2px);
        box-shadow: 0 18px 32px rgba(124, 92, 255, 0.32);
      }

      main {
        padding: 0 20px 80px;
        max-width: 1080px;
        margin: 0 auto;
      }

      section {
        margin-top: 64px;
        background: var(--panel);
        border: 1px solid var(--border);
        border-radius: 24px;
        padding: clamp(24px, 4vw, 40px);
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.35);
      }

      section + section {
        margin-top: 48px;
      }

      .badge {
        display: inline-block;
        padding: 4px 12px;
        border-radius: 999px;
        background: rgba(255, 95, 95, 0.12);
        color: var(--accent);
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.08em;
        margin-bottom: 18px;
      }

      ul.features {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        gap: 16px;
        list-style: none;
        padding: 0;
        margin: 24px 0 0;
      }

      ul.features li {
        background: rgba(255, 255, 255, 0.02);
        border: 1px solid var(--border);
        border-radius: 16px;
        padding: 18px;
      }

      .stack {
        display: grid;
        gap: 12px;
      }

      pre {
        background: rgba(0, 0, 0, 0.4);
        border-radius: 12px;
        border: 1px solid rgba(255, 255, 255, 0.06);
        padding: 14px 16px;
        overflow-x: auto;
        font-family: "Fira Code", "Cascadia Code", monospace;
        font-size: 0.95rem;
        color: #f4f4ff;
      }

      code.inline {
        background: rgba(255, 255, 255, 0.08);
        padding: 3px 6px;
        border-radius: 6px;
        font-family: inherit;
      }

      .project-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
        gap: 20px;
        margin-top: 24px;
      }

      .project-card {
        background: rgba(255, 255, 255, 0.01);
        border: 1px solid var(--border);
        border-radius: 18px;
        padding: 20px;
      }

      .project-card h3 {
        margin-top: 0;
        font-size: 1.4rem;
      }

      /* Portfolio Section Styles */
      .portfolio-section {
        padding: 100px 20px;
        background: linear-gradient(135deg, rgba(124, 92, 255, 0.05), rgba(255, 95, 95, 0.05));
        position: relative;
      }

      .portfolio-section::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 1px;
        background: linear-gradient(90deg, transparent, var(--border), transparent);
      }

      .portfolio-grid {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        gap: 40px;
        margin-top: 60px;
      }

      .portfolio-panel {
        background: var(--panel);
        border-radius: 16px;
        padding: 40px;
        border: 1px solid var(--border);
        backdrop-filter: blur(20px);
        transition: transform 0.3s ease, border-color 0.3s ease;
      }

      .portfolio-panel:hover {
        transform: translateY(-8px);
        border-color: var(--accent-2);
      }

      .portfolio-header {
        margin-bottom: 30px;
        padding-bottom: 20px;
        border-bottom: 1px solid var(--border);
      }

      .portfolio-header h3 {
        font-size: 1.8rem;
        margin: 0 0 8px 0;
        color: var(--accent);
      }

      .portfolio-header p {
        margin: 0;
        color: var(--muted);
        font-size: 0.95rem;
      }

      .title {
        font-size: 1.1rem;
        font-weight: 600;
        color: var(--accent-2);
        margin: 8px 0 20px 0;
      }

      .contact-info {
        margin-bottom: 30px;
      }

      .contact-item {
        display: flex;
        justify-content: space-between;
        margin-bottom: 8px;
        font-size: 0.9rem;
      }

      .contact-label {
        color: var(--muted);
        font-weight: 500;
      }

      .contact-value {
        color: var(--text);
        text-align: right;
      }

      .contact-value a {
        color: var(--accent-2);
        text-decoration: none;
      }

      .contact-value a:hover {
        text-decoration: underline;
      }

      .resume-section {
        margin-bottom: 30px;
      }

      .resume-section h4 {
        color: var(--accent);
        font-size: 1.2rem;
        margin: 0 0 15px 0;
        padding-bottom: 8px;
        border-bottom: 1px solid rgba(255, 95, 95, 0.2);
      }

      .resume-section p {
        color: var(--text);
        line-height: 1.7;
        margin: 0;
      }

      .tech-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
      }

      .tech-category {
        background: rgba(0, 0, 0, 0.2);
        padding: 20px;
        border-radius: 8px;
        border: 1px solid var(--border);
      }

      .tech-title {
        display: block;
        color: var(--accent-2);
        font-weight: 600;
        margin-bottom: 12px;
        font-size: 0.9rem;
      }

      .tech-category ul {
        margin: 0;
        padding: 0;
        list-style: none;
      }

      .tech-category li {
        color: var(--text);
        font-size: 0.85rem;
        margin-bottom: 6px;
        padding-left: 12px;
        position: relative;
      }

      .tech-category li::before {
        content: "▸";
        position: absolute;
        left: 0;
        color: var(--accent);
      }

      .project-item {
        background: rgba(0, 0, 0, 0.3);
        padding: 25px;
        border-radius: 12px;
        border: 1px solid var(--border);
        margin-bottom: 25px;
        transition: all 0.3s ease;
      }

      .project-item:hover {
        background: rgba(0, 0, 0, 0.4);
        border-color: var(--accent-2);
      }

      .project-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
      }

      .project-header h4 {
        color: var(--accent);
        margin: 0;
        font-size: 1.1rem;
      }

      .project-status {
        background: var(--accent);
        color: white;
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 0.75rem;
        font-weight: 600;
      }

      .project-item p {
        color: var(--text);
        line-height: 1.6;
        margin: 0 0 15px 0;
        font-size: 0.9rem;
      }

      .project-tech {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
      }

      .tech-tag {
        background: rgba(124, 92, 255, 0.2);
        color: var(--accent-2);
        padding: 4px 10px;
        border-radius: 16px;
        font-size: 0.75rem;
        border: 1px solid rgba(124, 92, 255, 0.3);
      }

      .service-category {
        margin-bottom: 30px;
      }

      .service-category h4 {
        color: var(--accent);
        font-size: 1.1rem;
        margin: 0 0 15px 0;
        padding-bottom: 8px;
        border-bottom: 1px solid rgba(255, 95, 95, 0.2);
      }

      .service-category ul {
        margin: 0;
        padding: 0;
        list-style: none;
      }

      .service-category li {
        color: var(--text);
        font-size: 0.9rem;
        margin-bottom: 8px;
        padding-left: 16px;
        position: relative;
      }

      .service-category li::before {
        content: "✦";
        position: absolute;
        left: 0;
        color: var(--accent-2);
      }

      .cta-section {
        background: linear-gradient(135deg, rgba(124, 92, 255, 0.1), rgba(255, 95, 95, 0.1));
        padding: 30px;
        border-radius: 12px;
        border: 1px solid var(--border);
        text-align: center;
        margin-top: 30px;
      }

      .cta-section h4 {
        color: var(--accent);
        margin: 0 0 10px 0;
        font-size: 1.2rem;
      }

      .cta-section p {
        color: var(--text);
        margin: 0 0 20px 0;
        font-size: 0.95rem;
      }

      .cta-buttons {
        display: flex;
        gap: 15px;
        justify-content: center;
      }

      .cta-button {
        padding: 12px 24px;
        border-radius: 8px;
        text-decoration: none;
        font-weight: 600;
        font-size: 0.9rem;
        transition: all 0.3s ease;
        border: 2px solid;
      }

      .cta-button.primary {
        background: var(--accent);
        color: white;
        border-color: var(--accent);
      }

      .cta-button.primary:hover {
        background: transparent;
        color: var(--accent);
      }

      .cta-button.secondary {
        background: transparent;
        color: var(--accent-2);
        border-color: var(--accent-2);
      }

      .cta-button.secondary:hover {
        background: var(--accent-2);
        color: white;
      }

      @media (max-width: 1200px) {
        .portfolio-grid {
          grid-template-columns: 1fr 1fr;
        }
      }

      @media (max-width: 768px) {
        .portfolio-grid {
          grid-template-columns: 1fr;
          gap: 30px;
        }
        
        .portfolio-panel {
          padding: 30px;
        }
        
        .tech-grid {
          grid-template-columns: 1fr;
        }
        
        .cta-buttons {
          flex-direction: column;
          align-items: center;
        }
        
        .cta-button {
          width: 200px;
        }
      }

      footer {
        text-align: center;
        padding: 60px 20px 40px;
        color: var(--muted);
      }

      footer a {
        color: var(--text);
        text-decoration: none;
        border-bottom: 1px dotted rgba(255, 255, 255, 0.4);
      }

      .demo-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 24px;
        margin-top: 24px;
      }

      .demo-panel {
        background: rgba(0, 0, 0, 0.3);
        border: 1px solid var(--border);
        border-radius: 16px;
        padding: 20px;
      }

      .demo-panel h3 {
        margin: 0 0 16px 0;
        font-size: 1.3rem;
        color: var(--accent);
      }

      .controls {
        display: flex;
        gap: 12px;
        margin-bottom: 16px;
      }

      .run-btn, .stop-btn {
        padding: 8px 16px;
        border: none;
        border-radius: 8px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s ease;
        font-size: 0.9rem;
      }

      .run-btn {
        background: linear-gradient(135deg, #00ff88, #00cc66);
        color: #0a0a0a;
      }

      .run-btn:hover {
        background: linear-gradient(135deg, #00cc66, #009944);
        transform: translateY(-1px);
      }

      .stop-btn {
        background: linear-gradient(135deg, var(--accent), #cc4444);
        color: white;
      }

      .stop-btn:hover {
        background: linear-gradient(135deg, #cc4444, #aa3333);
        transform: translateY(-1px);
      }

      .terminal {
        background: linear-gradient(145deg, #0a0a0a, #1a1a1a);
        border: 2px solid #333;
        border-radius: 12px;
        font-family: "Fira Code", "Cascadia Code", monospace;
        font-size: 0.85rem;
        height: 200px;
        overflow: hidden;
        scroll-behavior: smooth;
        box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.8), 0 0 20px rgba(0, 0, 0, 0.5);
        position: relative;
      }

      .terminal::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: repeating-linear-gradient(
          0deg,
          transparent,
          transparent 2px,
          rgba(0, 255, 136, 0.03) 2px,
          rgba(0, 255, 136, 0.03) 4px
        );
        pointer-events: none;
        z-index: 1;
      }

      .terminal-header {
        background: linear-gradient(145deg, #1a1a1a, #2a2a2a);
        color: #00ff88;
        padding: 10px 16px;
        border-bottom: 2px solid #333;
        font-weight: 600;
        text-shadow: 0 0 8px rgba(0, 255, 136, 0.5);
        position: relative;
        z-index: 2;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .terminal-header::before {
        content: "●";
        color: #00ff88;
        font-size: 0.8rem;
        animation: blink 2s infinite;
      }

      .terminal-content {
        padding: 12px;
        color: #e0e0e0;
        white-space: pre-wrap;
        font-family: inherit;
        line-height: 1.4;
        height: calc(100% - 45px);
        overflow-y: auto;
        scroll-behavior: smooth;
        position: relative;
        z-index: 2;
        scrollbar-width: thin;
        scrollbar-color: #00ff88 #1a1a1a;
      }

      .terminal-content::-webkit-scrollbar {
        width: 6px;
      }

      .terminal-content::-webkit-scrollbar-track {
        background: #1a1a1a;
      }

      .terminal-content::-webkit-scrollbar-thumb {
        background: #00ff88;
        border-radius: 3px;
      }

      .terminal-content::-webkit-scrollbar-thumb:hover {
        background: #44ff88;
      }

      .log-entry {
        margin-bottom: 8px;
        padding: 4px 0;
        animation: slideInFade 0.4s ease-out;
        border-left: 2px solid transparent;
        padding-left: 8px;
        transition: all 0.3s ease;
      }

      .log-entry:hover {
        background: rgba(0, 255, 136, 0.05);
        border-left-color: #00ff88;
      }

      @keyframes slideInFade {
        from { 
          opacity: 0; 
          transform: translateY(15px) translateX(-10px);
        }
        to { 
          opacity: 1; 
          transform: translateY(0) translateX(0);
        }
      }

      .log-timestamp {
        color: #666;
        font-weight: 500;
      }

      .log-command {
        color: #00ff88;
        font-weight: 700;
        text-shadow: 0 0 8px rgba(0, 255, 136, 0.4);
        background: rgba(0, 255, 136, 0.1);
        padding: 1px 4px;
        border-radius: 3px;
        border: 1px solid rgba(0, 255, 136, 0.3);
      }

      .log-warning {
        color: #ffaa00;
        font-weight: 600;
        text-shadow: 0 0 5px rgba(255, 170, 0, 0.4);
      }

      .log-error {
        color: #ff4444;
        font-weight: 600;
        text-shadow: 0 0 5px rgba(255, 68, 68, 0.4);
      }

      .log-success {
        color: #44ff88;
        font-weight: 600;
      }

      .log-data {
        color: #88aaff;
        font-family: monospace;
        background: rgba(136, 170, 255, 0.05);
        padding: 2px 6px;
        border-radius: 4px;
        margin-top: 2px;
        display: block;
        border-left: 2px solid rgba(136, 170, 255, 0.3);
        padding-left: 8px;
      }

      .progress-bar {
        background: linear-gradient(145deg, #222, #444);
        height: 6px;
        border-radius: 3px;
        margin: 6px 0;
        overflow: hidden;
        position: relative;
        border: 1px solid #555;
      }

      .progress-fill {
        background: linear-gradient(90deg, #00ff88, #44ff88, #88ffaa);
        height: 100%;
        width: 0%;
        transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;
      }

      .progress-fill::after {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.4),
          transparent
        );
        animation: shimmer 2s infinite;
      }

      @keyframes shimmer {
        0% { left: -100%; }
        100% { left: 100%; }
      }

      /* Control Room Styles */
      .control-grid-advanced {
        display: grid;
        grid-template-columns: 1fr 1fr;
        grid-template-rows: auto auto;
        gap: 24px;
        margin-top: 24px;
      }

      .status-panel-main {
        background: rgba(0, 0, 0, 0.6);
        border: 2px solid rgba(0, 255, 136, 0.3);
        border-radius: 16px;
        padding: 24px;
        box-shadow: 0 0 30px rgba(0, 255, 136, 0.1);
      }

      .monitor-array {
        background: rgba(0, 0, 0, 0.6);
        border: 2px solid rgba(124, 92, 255, 0.3);
        border-radius: 16px;
        padding: 24px;
        box-shadow: 0 0 30px rgba(124, 92, 255, 0.1);
      }

      .diagnostic-panel-advanced {
        grid-column: 1 / -1;
        background: rgba(0, 0, 0, 0.6);
        border: 2px solid rgba(255, 95, 95, 0.3);
        border-radius: 16px;
        padding: 24px;
        box-shadow: 0 0 30px rgba(255, 95, 95, 0.1);
      }

      .status-panel-main h3, .monitor-array h3, .diagnostic-panel-advanced h3 {
        margin: 0 0 20px 0;
        font-size: 1.3rem;
        color: var(--accent);
        text-shadow: 0 0 10px rgba(255, 95, 95, 0.3);
      }

      .room-stats {
        display: flex;
        gap: 8px;
        margin-top: 8px;
        font-size: 0.7rem;
        color: var(--muted);
      }

      .room-stats span {
        background: rgba(255, 255, 255, 0.05);
        padding: 2px 6px;
        border-radius: 4px;
        border: 1px solid rgba(255, 255, 255, 0.1);
      }

      /* Monitor Styles */
      .monitors-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 16px;
      }

      .monitor {
        background: #1a1a1a;
        border: 3px solid #333;
        border-radius: 12px;
        overflow: hidden;
        position: relative;
      }

      .monitor-active {
        border-color: #00ff88;
        box-shadow: 0 0 20px rgba(0, 255, 136, 0.2);
      }

      .monitor-failed {
        border-color: #ff4444;
        box-shadow: 0 0 20px rgba(255, 68, 68, 0.3);
        animation: flicker 3s infinite;
      }

      .monitor-warning {
        border-color: #ffaa00;
        box-shadow: 0 0 20px rgba(255, 170, 0, 0.2);
      }

      @keyframes flicker {
        0%, 95%, 100% { opacity: 1; }
        96%, 99% { opacity: 0.7; }
      }

      .monitor-header {
        background: #0a0a0a;
        color: #00ff88;
        padding: 8px 12px;
        font-size: 0.8rem;
        font-weight: 600;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: 1px solid #333;
      }

      .monitor-failed .monitor-header {
        color: #ff4444;
      }

      .monitor-warning .monitor-header {
        color: #ffaa00;
      }

      .signal-strength {
        width: 20px;
        height: 12px;
        background: linear-gradient(to right, 
          #00ff88 0%, #00ff88 25%, 
          #44ff88 25%, #44ff88 50%, 
          #88ff88 50%, #88ff88 75%, 
          #ccffcc 75%, #ccffcc 100%);
        border-radius: 2px;
        position: relative;
      }

      .signal-strength.failed {
        background: #ff4444;
        animation: pulse 1s infinite;
      }

      .signal-strength.warning {
        background: linear-gradient(to right, 
          #ffaa00 0%, #ffaa00 50%, 
          #666 50%, #666 100%);
      }

      @keyframes pulse {
        0%, 100% { opacity: 0.3; }
        50% { opacity: 1; }
      }

      .monitor-content {
        height: 80px;
        padding: 12px;
        background: #0a0a0a;
      }

      .live-feed {
        height: 100%;
        font-family: "Fira Code", monospace;
        font-size: 0.7rem;
        color: #00ff88;
      }

      .feed-data {
        display: flex;
        flex-direction: column;
        gap: 4px;
      }

      .data-line {
        display: flex;
        justify-content: space-between;
      }

      .value-good { color: #00ff88; }
      .value-normal { color: #88aaff; }
      .value-error { color: #ff4444; font-weight: bold; }

      .error-screen {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100%;
        color: #ff4444;
        text-align: center;
        position: relative;
      }

      .error-text {
        font-weight: bold;
        font-size: 0.9rem;
        margin-bottom: 4px;
      }

      .error-code {
        font-size: 0.7rem;
        color: #cc3333;
      }

      .static-lines {
        position: absolute;
        inset: 0;
        background: repeating-linear-gradient(
          0deg,
          transparent,
          transparent 2px,
          rgba(255, 68, 68, 0.1) 2px,
          rgba(255, 68, 68, 0.1) 4px
        );
        animation: static 0.5s infinite linear;
      }

      @keyframes static {
        0% { transform: translateY(0); }
        100% { transform: translateY(8px); }
      }

      .power-graph {
        width: 100%;
        height: 40px;
      }

      .power-stats {
        display: flex;
        justify-content: space-between;
        margin-top: 8px;
        font-size: 0.7rem;
      }

      /* Enhanced Terminal */
      .terminal-advanced {
        background: #000;
        border: 2px solid #333;
        border-radius: 12px;
        font-family: "Fira Code", "Cascadia Code", monospace;
        font-size: 0.85rem;
        height: 250px;
        overflow: hidden;
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.8);
      }

      .terminal-advanced .terminal-header {
        background: #1a1a1a;
        color: #00ff88;
        padding: 8px 12px;
        border-bottom: 2px solid #333;
        font-weight: 600;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .terminal-indicators {
        display: flex;
        gap: 6px;
      }

      .indicator {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        animation: blink 2s infinite;
      }

      .indicator.active {
        background: #00ff88;
        box-shadow: 0 0 6px rgba(0, 255, 136, 0.5);
      }

      .indicator.warning {
        background: #ffaa00;
        box-shadow: 0 0 6px rgba(255, 170, 0, 0.5);
      }

      .terminal-content-advanced {
        padding: 12px;
        color: #e0e0e0;
        white-space: pre-wrap;
        font-family: inherit;
        line-height: 1.4;
        height: calc(100% - 40px);
        overflow-y: auto;
        scroll-behavior: smooth;
      }

      .reset-btn {
        padding: 8px 16px;
        border: none;
        border-radius: 8px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s ease;
        font-size: 0.9rem;
        background: linear-gradient(135deg, #7c5cff, #5c4cdd);
        color: white;
      }

      .reset-btn:hover {
        background: linear-gradient(135deg, #6c4cef, #4c3ccd);
        transform: translateY(-1px);
      }

      @media (max-width: 768px) {
        .control-grid-advanced {
          grid-template-columns: 1fr;
        }
        
        .monitors-grid {
          grid-template-columns: 1fr;
        }
        
        .combat-layout {
          flex-direction: column;
        }
      }

      /* Combat Demo Enhanced Styles */
      .combat-demo-extended {
        grid-column: 1 / -1;
      }

      .combat-layout {
        display: flex;
        gap: 20px;
        margin-top: 16px;
      }

      .combat-controls {
        flex: 1;
      }

      .script-panel {
        flex: 1;
        background: rgba(0, 0, 0, 0.4);
        border: 2px solid rgba(255, 170, 0, 0.3);
        border-radius: 12px;
        padding: 16px;
        font-family: "Fira Code", monospace;
        font-size: 0.85rem;
      }

      .script-panel h4 {
        margin: 0 0 16px 0;
        color: #ffaa00;
        font-size: 1.1rem;
      }

      .script-panel h5 {
        color: #00ff88;
        margin: 12px 0 8px 0;
      }

      .room-sequence {
        margin: 12px 0;
      }

      .room-item {
        background: rgba(255, 255, 255, 0.05);
        border-left: 3px solid #ff5f5f;
        padding: 8px 12px;
        margin: 6px 0;
        border-radius: 0 8px 8px 0;
      }

      .script-btn {
        padding: 8px 16px;
        border: none;
        border-radius: 8px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s ease;
        font-size: 0.9rem;
        background: linear-gradient(135deg, #ffaa00, #cc8800);
        color: #0a0a0a;
      }

      .script-btn:hover {
        background: linear-gradient(135deg, #cc8800, #aa6600);
        transform: translateY(-1px);
      }

      .script-actions {
        display: flex;
        gap: 12px;
        margin-top: 16px;
      }

      .room-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 16px;
      }

      .room-status {
        background: rgba(255, 255, 255, 0.02);
        border: 2px solid var(--border);
        border-radius: 12px;
        padding: 16px;
        position: relative;
        transition: all 0.3s ease;
      }

      .room-status.room-ok {
        border-color: #00ff88;
        box-shadow: 0 0 15px rgba(0, 255, 136, 0.1);
      }

      .room-status.room-error {
        border-color: #ff4444;
        box-shadow: 0 0 15px rgba(255, 68, 68, 0.2);
        animation: pulse-error 2s infinite;
      }

      .room-status.room-maintenance {
        border-color: #ffaa00;
        box-shadow: 0 0 15px rgba(255, 170, 0, 0.15);
      }

      @keyframes pulse-error {
        0%, 100% { box-shadow: 0 0 15px rgba(255, 68, 68, 0.2); }
        50% { box-shadow: 0 0 25px rgba(255, 68, 68, 0.4); }
      }

      .room-number {
        font-size: 2rem;
        font-weight: 700;
        color: var(--accent);
        line-height: 1;
      }

      .room-name {
        font-size: 0.9rem;
        color: var(--muted);
        margin-bottom: 12px;
      }

      .status-light {
        width: 16px;
        height: 16px;
        border-radius: 50%;
        position: absolute;
        top: 16px;
        right: 16px;
        animation: blink 2s infinite;
      }

      .status-light.green {
        background: #00ff88;
        box-shadow: 0 0 10px rgba(0, 255, 136, 0.5);
      }

      .status-light.red {
        background: #ff4444;
        box-shadow: 0 0 10px rgba(255, 68, 68, 0.5);
      }

      .status-light.yellow {
        background: #ffaa00;
        box-shadow: 0 0 10px rgba(255, 170, 0, 0.5);
      }

      @keyframes blink {
        0%, 50% { opacity: 1; }
        51%, 100% { opacity: 0.3; }
      }

      .room-info {
        font-size: 0.8rem;
        color: var(--text);
        font-weight: 600;
      }

      @media (max-width: 768px) {
        .control-grid {
          grid-template-columns: 1fr;
        }
        
        .room-grid {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <header>
      <h1>Haunted House Robotics</h1>
      <p class="lead">
        A trio of Halloween-ready automation demos showcasing servo animatronics, motion FX, and an
        AI-enhanced guest experience app. Built with Arduino, DMX lighting, React Native, and a dash of theatrics.
      </p>
      <div class="cta">
        <a class="primary" href="https://github.com/HannnibalKing/Haunted-House-Robotics-DMX" target="_blank" rel="noopener">View Repository</a>
        <a class="secondary" href="#terminal">Run Terminal Demo</a>
      </div>
    </header>

    <main>
      <section>
        <span class="badge">The Lineup</span>
        <h2>Three Projects, All Thrills</h2>
        <div class="project-grid">
          <div class="project-card">
            <h3>Animated Skeleton</h3>
            <p>
              Four-servo animatronic paired with DMX lighting. Motion detection snaps the skeleton toward guests,
              while the jaw syncs to audio for living-dead banter.
            </p>
            <ul class="features">
              <li>Arduino Uno + MAX485 DMX Shield</li>
              <li>Motion-triggered show cues</li>
              <li>Modular C++ control library</li>
              <li>ASCII wiring schematic</li>
            </ul>
          </div>
          <div class="project-card">
            <h3>Motion-Activated Ghost</h3>
            <p>
              A carriage-mounted ghost swoops down a hallway with WS2812 strobes, fog blasts, and a PIR-triggered
              stepper choreography.
            </p>
            <ul class="features">
              <li>AccelStepper + NeoPixel effects</li>
              <li>DMX integration for venue control</li>
              <li>Configurable travel distance</li>
              <li>Fog relay sequencing</li>
            </ul>
          </div>
          <div class="project-card">
            <h3>Scare Experience App</h3>
            <p>
              Cross-platform Expo app for gathering per-room ratings, visualizing heatmaps, and generating AI floorplan drafts from crowd sentiment.
            </p>
            <ul class="features">
              <li>React Native + Expo SDK 50</li>
              <li>Jest-tested floorplan generator</li>
              <li>Dark-theme UX for in-attraction use</li>
              <li>Offline-friendly rating cache</li>
            </ul>
          </div>
        </div>
      </section>

      <section>
        <span class="badge">Show Flow</span>
        <h2>Quick Stats</h2>
        <div class="stack">
          <p><strong>Hardware:</strong> Servo + stepper control at 50Hz, DMX512 lighting cues, fog relay automation.</p>
          <p><strong>Software:</strong> Arduino sketches, modular C++ libraries, Expo/React Native app with Context state.</p>
          <p><strong>Skills Highlighted:</strong> embedded motion control, lighting design, UX for live events, AI-assisted layout ideation.</p>
        </div>
      </section>

      <section id="terminal">
        <span class="badge">Live Interactive Demos</span>
        <h2>Control Each System</h2>
        <p>Click the controls below to run each robotics system. Watch the terminal output show real-time cues and command sequences.</p>
        
        <div class="demo-grid">
          <div class="demo-panel">
            <h3>🦴 Animated Skeleton</h3>
            <div class="controls">
              <button class="run-btn" onclick="runDemo('skeleton')">▶️ Start Show</button>
              <button class="stop-btn" onclick="stopDemo('skeleton')">⏹️ Emergency Stop</button>
            </div>
            <div class="terminal" id="skeleton-terminal">
              <div class="terminal-header">SKELETON_CONTROLLER v2.1</div>
              <div class="terminal-content" id="skeleton-output">Ready. Press START to begin servo choreography...</div>
            </div>
          </div>

          <div class="demo-panel">
            <h3>👻 Motion Ghost</h3>
            <div class="controls">
              <button class="run-btn" onclick="runDemo('ghost')">▶️ Launch Scare</button>
              <button class="stop-btn" onclick="stopDemo('ghost')">⏹️ Emergency Stop</button>
            </div>
            <div class="terminal" id="ghost-terminal">
              <div class="terminal-header">GHOST_MOTION v1.8</div>
              <div class="terminal-content" id="ghost-output">Carriage at HOME position. Sensors armed...</div>
            </div>
          </div>

          <div class="demo-panel">
            <h3>🌫️ Fog & Lighting</h3>
            <div class="controls">
              <button class="run-btn" onclick="runDemo('effects')">▶️ Fire Effects</button>
              <button class="stop-btn" onclick="stopDemo('effects')">⏹️ Emergency Stop</button>
            </div>
            <div class="terminal" id="effects-terminal">
              <div class="terminal-header">DMX_MASTER v3.2</div>
              <div class="terminal-content" id="effects-output">DMX channels 1-512 online. Fog machine primed...</div>
            </div>
          </div>

          <div class="demo-panel combat-demo-extended">
            <h3>🔥 Combat Escape Room</h3>
            <div class="combat-layout">
              <div class="combat-controls">
                <div class="controls">
                  <button class="run-btn" onclick="runDemo('combat')">▶️ Begin Mission</button>
                  <button class="stop-btn" onclick="stopDemo('combat')">⏹️ Abort Mission</button>
                  <button class="script-btn" onclick="viewEscapeRoomScript()">📋 View Script</button>
                </div>
                <div class="terminal" id="combat-terminal">
                  <div class="terminal-header">TACTICAL_SIM v4.0 [CLASSIFIED]</div>
                  <div class="terminal-content" id="combat-output">Insurgent camp simulation loaded. 4 rooms active. Awaiting infiltration...</div>
                </div>
              </div>
              <div class="script-panel" id="scriptPanel" style="display: none;">
                <h4>🎯 Combat Escape Room Script</h4>
                <div class="script-content">
                  <h5>Mission Briefing:</h5>
                  <p><strong>Objective:</strong> Infiltrate insurgent compound, gather intelligence, neutralize threats</p>
                  <p><strong>Intel:</strong> 4-room compound, 6 hostiles, 2 civilians, high-value documents</p>
                  <p><strong>Equipment:</strong> M4A1, sidearm, breaching charges, smoke grenades</p>
                  
                  <h5>Room Sequence:</h5>
                  <div class="room-sequence">
                    <div class="room-item">
                      <strong>Room 1 - Entry:</strong> Breach wall, deploy smoke, advance under cover
                    </div>
                    <div class="room-item">
                      <strong>Room 2 - Main Hall:</strong> Multiple hostiles, mortar threat, IED discovery
                    </div>
                    <div class="room-item">
                      <strong>Room 3 - Interrogation:</strong> Intel documents, sniper overwatch threat
                    </div>
                    <div class="room-item">
                      <strong>Room 4 - Exfil:</strong> Secure extraction point, mission complete
                    </div>
                  </div>
                  
                  <div class="script-actions">
                    <button class="run-btn" onclick="downloadEscapeRoomCode()">💾 Download Code</button>
                    <button class="run-btn" onclick="viewGitHubRepo()">🔗 View on GitHub</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section id="control-room">
        <span class="badge">Mission Control</span>
        <h2>🎮 Advanced Control Center</h2>
        <p>Real-time monitoring, telemetry streaming, and diagnostics for all robotics systems across the haunted attraction.</p>
        
        <div class="control-grid-advanced">
          <!-- Main Status Display -->
          <div class="status-panel-main">
            <h3>🏠 Facility Overview</h3>
            <div class="room-grid">
              <div class="room-status room-ok" id="room1">
                <div class="room-number">1</div>
                <div class="room-name">Entrance Hall</div>
                <div class="status-light green"></div>
                <div class="room-info">Skeleton: OPERATIONAL</div>
                <div class="room-stats">
                  <span>⚡ 12.1V</span>
                  <span>🌡️ 42°C</span>
                  <span>📶 98%</span>
                </div>
              </div>
              <div class="room-status room-ok" id="room2">
                <div class="room-number">2</div>
                <div class="room-name">Ghost Corridor</div>
                <div class="status-light green"></div>
                <div class="room-info">Motion System: ACTIVE</div>
                <div class="room-stats">
                  <span>⚡ 11.9V</span>
                  <span>🌡️ 38°C</span>
                  <span>📶 94%</span>
                </div>
              </div>
              <div class="room-status room-error" id="room3">
                <div class="room-number">3</div>
                <div class="room-name">Chamber of Terror</div>
                <div class="status-light red"></div>
                <div class="room-info">SERVO FAULT - BACKUP ACTIVE</div>
                <div class="room-stats">
                  <span>⚡ 10.2V</span>
                  <span>🌡️ 71°C</span>
                  <span>📶 45%</span>
                </div>
              </div>
              <div class="room-status room-maintenance" id="room4">
                <div class="room-number">4</div>
                <div class="room-name">Exit Portal</div>
                <div class="status-light yellow"></div>
                <div class="room-info">Scheduled Maintenance</div>
                <div class="room-stats">
                  <span>⚡ 12.3V</span>
                  <span>🌡️ 35°C</span>
                  <span>📶 89%</span>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Monitor Array -->
          <div class="monitor-array">
            <h3>📺 Surveillance & Telemetry</h3>
            <div class="monitors-grid">
              <div class="monitor monitor-active" id="monitor1">
                <div class="monitor-header">
                  <span>CAM-01 | ENTRANCE</span>
                  <div class="signal-strength"></div>
                </div>
                <div class="monitor-content">
                  <div class="live-feed" id="feed1">
                    <div class="feed-data">
                      <div class="data-line">MOTION: <span class="value-good">CLEAR</span></div>
                      <div class="data-line">LIGHT: <span class="value-normal">85%</span></div>
                      <div class="data-line">AUDIO: <span class="value-good">-12dB</span></div>
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="monitor monitor-failed" id="monitor2">
                <div class="monitor-header">
                  <span>CAM-02 | CORRIDOR</span>
                  <div class="signal-strength failed"></div>
                </div>
                <div class="monitor-content">
                  <div class="live-feed failed">
                    <div class="error-screen">
                      <div class="error-text">SIGNAL LOST</div>
                      <div class="error-code">ERR: 0x4F2A</div>
                      <div class="static-lines"></div>
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="monitor monitor-active" id="monitor3">
                <div class="monitor-header">
                  <span>SYS-03 | POWER GRID</span>
                  <div class="signal-strength"></div>
                </div>
                <div class="monitor-content">
                  <div class="live-feed" id="feed3">
                    <canvas class="power-graph" id="powerGraph" width="120" height="60"></canvas>
                    <div class="power-stats">
                      <div>LOAD: <span id="powerLoad">67%</span></div>
                      <div>FREQ: <span id="powerFreq">60.1Hz</span></div>
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="monitor monitor-warning" id="monitor4">
                <div class="monitor-header">
                  <span>ROBOT-04 | CHAMBER</span>
                  <div class="signal-strength warning"></div>
                </div>
                <div class="monitor-content">
                  <div class="live-feed" id="feed4">
                    <div class="feed-data">
                      <div class="data-line">STATUS: <span class="value-error">FAULT</span></div>
                      <div class="data-line">TEMP: <span class="value-error">71°C</span></div>
                      <div class="data-line">SERVO: <span class="value-error">TIMEOUT</span></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Enhanced Diagnostic Panel -->
          <div class="diagnostic-panel-advanced">
            <h3>🔧 System Diagnostics</h3>
            <div class="controls">
              <button class="run-btn" onclick="runControlRoom()">🚨 Run Deep Scan</button>
              <button class="stop-btn" onclick="stopControlRoom()">⏹️ Abort</button>
              <button class="reset-btn" onclick="resetSystems()">🔄 Reset All</button>
            </div>
            <div class="terminal-advanced" id="control-terminal">
              <div class="terminal-header">
                <span>HAUNTED_HOUSE_CONTROL v3.1.2</span>
                <div class="terminal-indicators">
                  <div class="indicator active"></div>
                  <div class="indicator active"></div>
                  <div class="indicator warning"></div>
                </div>
              </div>
              <div class="terminal-content-advanced" id="control-output">Control room online. All systems monitoring... Click RUN DEEP SCAN to diagnose system anomalies.</div>
            </div>
          </div>
        </div>
      </section>

      <!-- Portfolio Section -->
      <section class="portfolio-section">
        <div class="container">
          <div class="section-header">
            <h2>Portfolio</h2>
            <p>Professional experience in AI, robotics, and software engineering</p>
          </div>
          
          <div class="portfolio-grid">
            <!-- Resume Panel -->
            <div class="portfolio-panel resume-panel">
              <div class="portfolio-header">
                <h3>Jose "Hannibal" Herrera</h3>
                <p class="title">AI Solutions Engineer & Robotics Developer</p>
              </div>
              
              <div class="contact-info">
                <div class="contact-item">
                  <span class="contact-label">Email:</span>
                  <span class="contact-value">herrera.hannibal84@gmail.com</span>
                </div>
                <div class="contact-item">
                  <span class="contact-label">Location:</span>
                  <span class="contact-value">Remote / Travel Available</span>
                </div>
                <div class="contact-item">
                  <span class="contact-label">GitHub:</span>
                  <a href="https://github.com/HannnibalKing" target="_blank" class="contact-value">@HannnibalKing</a>
                </div>
              </div>

              <div class="resume-section">
                <h4>Professional Summary</h4>
                <p>Innovative AI Solutions Engineer with expertise in robotics automation, immersive experience design, and full-stack development. Proven track record of building sophisticated control systems for entertainment, training, and industrial applications. Specializes in integrating AI assistance with hardware automation for enhanced development velocity and system reliability.</p>
              </div>

              <div class="resume-section">
                <h4>Core Technologies</h4>
                <div class="tech-grid">
                  <div class="tech-category">
                    <span class="tech-title">AI & Automation</span>
                    <ul>
                      <li>AI-Assisted Development</li>
                      <li>Machine Learning Integration</li>
                      <li>Process Automation</li>
                      <li>Intelligent System Design</li>
                    </ul>
                  </div>
                  <div class="tech-category">
                    <span class="tech-title">Robotics & IoT</span>
                    <ul>
                      <li>Arduino/Raspberry Pi</li>
                      <li>Servo Control Systems</li>
                      <li>MQTT/WebSocket Protocols</li>
                      <li>Sensor Integration</li>
                    </ul>
                  </div>
                  <div class="tech-category">
                    <span class="tech-title">Software Development</span>
                    <ul>
                      <li>JavaScript/Node.js</li>
                      <li>Python/C++</li>
                      <li>Real-time Systems</li>
                      <li>API Development</li>
                    </ul>
                  </div>
                  <div class="tech-category">
                    <span class="tech-title">Specialized Systems</span>
                    <ul>
                      <li>DMX Lighting Control</li>
                      <li>Audio/Visual Systems</li>
                      <li>Safety & Emergency Systems</li>
                      <li>Interactive Experience Design</li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>

            <!-- Projects Showcase -->
            <div class="portfolio-panel projects-panel">
              <div class="portfolio-header">
                <h3>Featured Projects</h3>
                <p>Showcasing innovation in immersive technology</p>
              </div>

              <div class="project-item">
                <div class="project-header">
                  <h4>Haunted House Robotics Suite</h4>
                  <span class="project-status">Active Development</span>
                </div>
                <p>Comprehensive automation system featuring AI-enhanced development processes, synchronized effects across multiple rooms, and sophisticated safety systems. Demonstrates cutting-edge integration of hardware automation with intelligent software control.</p>
                <div class="project-tech">
                  <span class="tech-tag">AI-Assisted</span>
                  <span class="tech-tag">Node.js</span>
                  <span class="tech-tag">Arduino</span>
                  <span class="tech-tag">DMX</span>
                  <span class="tech-tag">WebSocket</span>
                </div>
              </div>

              <div class="project-item">
                <div class="project-header">
                  <h4>Combat Escape Room Controller</h4>
                  <span class="project-status">Production Ready</span>
                </div>
                <p>Advanced tactical simulation system with real-time IoT device control, mission scoring algorithms, and comprehensive analytics. Built for immersive training environments with enterprise-grade reliability.</p>
                <div class="project-tech">
                  <span class="tech-tag">Express.js</span>
                  <span class="tech-tag">MQTT</span>
                  <span class="tech-tag">IoT Control</span>
                  <span class="tech-tag">Real-time</span>
                </div>
              </div>

              <div class="project-item">
                <div class="project-header">
                  <h4>Intelligent Scare Coordination</h4>
                  <span class="project-status">Optimized</span>
                </div>
                <p>Predictive scare timing system using sensor fusion and behavioral analysis to maximize visitor engagement while ensuring safety protocols. Features adaptive algorithms that learn from visitor responses.</p>
                <div class="project-tech">
                  <span class="tech-tag">ML Analytics</span>
                  <span class="tech-tag">Sensor Fusion</span>
                  <span class="tech-tag">Safety Systems</span>
                </div>
              </div>
            </div>

            <!-- Capabilities & Services -->
            <div class="portfolio-panel services-panel">
              <div class="portfolio-header">
                <h3>Professional Services</h3>
                <p>Available for consulting and development projects</p>
              </div>

              <div class="service-category">
                <h4>AI-Enhanced Development</h4>
                <ul>
                  <li>Rapid prototyping with AI assistance</li>
                  <li>Intelligent system architecture design</li>
                  <li>Automated testing and documentation</li>
                  <li>Code optimization and refactoring</li>
                </ul>
              </div>

              <div class="service-category">
                <h4>Automation Solutions</h4>
                <ul>
                  <li>Custom control system development</li>
                  <li>IoT device integration and management</li>
                  <li>Real-time monitoring and analytics</li>
                  <li>Safety system implementation</li>
                </ul>
              </div>

              <div class="service-category">
                <h4>Experience Engineering</h4>
                <ul>
                  <li>Immersive environment design</li>
                  <li>Interactive entertainment systems</li>
                  <li>Training simulation development</li>
                  <li>Performance optimization</li>
                </ul>
              </div>

              <div class="cta-section">
                <h4>Ready to Build Something Amazing?</h4>
                <p>Let's discuss how AI-enhanced development can accelerate your next project.</p>
                <div class="cta-buttons">
                  <a href="https://github.com/HannnibalKing" target="_blank" class="cta-button primary">View GitHub</a>
                  <a href="mailto:herrera.hannibal84@gmail.com" class="cta-button secondary">Contact Me</a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <footer>
      <p>© 2025 Haunted House Robotics — Crafted for immersive Halloween experiences.</p>
      <p>
        Need the full repo? <a href="https://github.com/HannnibalKing/Haunted-House-Robotics-DMX" target="_blank" rel="noopener">Fork it on GitHub</a>.
      </p>
    </footer>
    <script>
      const demoScenarios = {
        skeleton: [
          { time: 0, cmd: 'INIT', msg: 'Power on animatronic skeleton core', data: 'Servos: 4/4 online | DMX: Ch 1-16 active', type: 'success' },
          { time: 800, cmd: 'M05', msg: 'Set head servo to neutral', data: 'Position: 90° | Torque: 2.1kg-cm', progress: 25 },
          { time: 1800, cmd: 'L12', msg: 'Fade DMX wash to ember red', data: 'RGB: [255,85,0] | Brightness: 35%', progress: 40 },
          { time: 3000, cmd: 'S11', msg: 'Idle loop: finger twitch', data: 'Micro movements: ±3° | Freq: 0.2Hz', progress: 55 },
          { time: 4500, cmd: 'PIR', msg: 'Motion trip detected - VISITOR ENTERS', data: 'Distance: 1.2m | Confidence: 94%', highlight: true, type: 'warning', progress: 70 },
          { time: 5200, cmd: 'M29', msg: 'Snap head to visitor', data: 'Target angle: 135° | Speed: 180°/s', progress: 80 },
          { time: 6000, cmd: 'M33', msg: 'Raise both arms', data: 'L-arm: 45° | R-arm: 50° | Sync delta: 0.1s', progress: 85 },
          { time: 7200, cmd: 'AUX', msg: 'Trigger jaw chatter synced to audio', data: 'Audio file: skeleton_laugh.wav | Duration: 2.3s', progress: 90 },
          { time: 8500, cmd: 'DMX', msg: 'Flash strobes + cold white backlight', data: 'Strobe: 15Hz | Backlight: 100% | Effect: pulse', progress: 95 },
          { time: 9800, cmd: 'WAIT', msg: 'Hold pose', data: 'Servo lock engaged | Power: 85% | Hold time: 0.5s', progress: 98 },
          { time: 11000, cmd: 'RESET', msg: 'Arms down, lights to idle', data: 'Return to home positions | Fade time: 1.0s', type: 'success', progress: 100 }
        ],
        ghost: [
          { time: 0, cmd: 'INIT', msg: 'Pre-charge carriage and test limit switches', data: 'Stepper: 200 steps/rev | Accel: 400 steps/s²', type: 'success', progress: 10 },
          { time: 1000, cmd: 'L21', msg: 'Set LED strip to cyan breathing', data: 'WS2812: 60 LEDs | Pattern: sine wave | Period: 3s', progress: 20 },
          { time: 2200, cmd: 'PIR', msg: 'Motion detect at hallway - GUEST APPROACH', data: 'Sensor range: 5m | Heat signature detected', highlight: true, type: 'warning', progress: 40 },
          { time: 3500, cmd: 'M14', msg: 'Carriage glide forward 1.2m', data: 'Speed: 800 steps/s | Distance: 1200mm | ETA: 1.5s', progress: 60 },
          { time: 5200, cmd: 'FX1', msg: 'Fog blast + shriek sample', data: 'Fog duration: 2s | Audio: ghost_shriek.wav | Volume: 85%', progress: 75 },
          { time: 6800, cmd: 'L99', msg: 'Strobe white / amber alternation', data: 'Frequency: 8Hz | Colors: #FFFFFF/#FFAA00 | Intensity: max', progress: 85 },
          { time: 8200, cmd: 'WAIT', msg: 'Hover at guest', data: 'Position hold | Servo brake: ON | Duration: 0.5s', progress: 90 },
          { time: 9500, cmd: 'M02', msg: 'Retreat carriage to home', data: 'Return speed: 1200 steps/s | Home switch active', progress: 95 },
          { time: 11000, cmd: 'RESET', msg: 'Resume cyan breathing + cooldown', data: 'Cooldown: 10s | Ready for next trigger', type: 'success', progress: 100 }
        ],
        effects: [
          { time: 0, cmd: 'INIT', msg: 'DMX universe online - 512 channels active', data: 'Protocol: DMX-512 | Baud: 250kbps | Fixtures: 8 online', type: 'success', progress: 15 },
          { time: 1200, cmd: 'FOG1', msg: 'Fog machine 1 heating (30s warm-up)', data: 'Temp: 24°C → 180°C | Fluid level: 85% | Power: 1200W', progress: 25 },
          { time: 2500, cmd: 'FOG2', msg: 'Fog machine 2 heating (30s warm-up)', data: 'Temp: 26°C → 180°C | Fluid level: 92% | Power: 1200W', progress: 35 },
          { time: 4000, cmd: 'L001', msg: 'Par lights 1-4 fade to deep red', data: 'DMX Ch 1-12: RGB[180,0,0] | Fade time: 2s | Dimmer: 75%', progress: 50 },
          { time: 5800, cmd: 'TRIG', msg: 'Pressure plate activated - GUEST DETECTED', data: 'Weight: 68kg | Plate area: 0.5m² | Trigger threshold exceeded', highlight: true, type: 'warning', progress: 70 },
          { time: 7200, cmd: 'FIRE', msg: 'Fog blast + flame projector ignition', data: 'Fog output: max | Flame height: 2.1m | Safety interlock: OK', type: 'warning', progress: 85 },
          { time: 8500, cmd: 'L255', msg: 'Strobe array full intensity', data: 'Xenon strobes: 6 units | Flash rate: 12Hz | Power: 3600W total', progress: 90 },
          { time: 10000, cmd: 'SND1', msg: 'Thunder crack + explosion sample', data: 'Audio file: thunder_explosion.wav | SPL: 110dB | Duration: 3.2s', progress: 95 },
          { time: 12000, cmd: 'FADE', msg: 'All effects fade to ambient', data: 'Fade time: 3s | Ambient level: 15% | Fog dissipate: 30s', type: 'success', progress: 100 }
        ],
        combat: [
          { time: 0, cmd: 'BOOT', msg: '[CLASSIFIED] Tactical simulation initializing...', data: 'Scenario: Urban CQB | Hostiles: 6 | Civilians: 2 | Intel: HIGH', type: 'warning', progress: 5 },
          { time: 2000, cmd: 'SITR', msg: 'SITUATION: Insurgent compound, 4 rooms, 6 hostiles', data: 'Threat level: SEVERE | Rules of engagement: WEAPONS FREE', progress: 15 },
          { time: 4500, cmd: 'R001', msg: 'ENTRY POINT: Breached wall, smoke grenades deployed', data: 'Breach charge: 2kg C4 | Smoke duration: 45s | Visibility: <2m', progress: 30 },
          { time: 7000, cmd: 'CONT', msg: 'Contact front! AK-47 muzzle flash detected', data: 'Weapon ID: AK-47 | Range: 15m | Suppressive fire initiated', highlight: true, type: 'error', progress: 50 },
          { time: 9500, cmd: 'MORTAR', msg: 'Incoming 82mm mortar - TAKE COVER!', data: 'Impact ETA: 3.2s | Blast radius: 20m | DANGER CLOSE', type: 'error', progress: 60 },
          { time: 11000, cmd: 'EXPL', msg: 'Explosion 15m northeast - debris shower active', data: 'Blast yield: ~2kg TNT | Debris field: 30m | Casualties: 0', type: 'warning', progress: 70 },
          { time: 13500, cmd: 'R002', msg: 'Room 2 cleared - IED discovered under stairwell', data: 'Device type: Pressure plate IED | Payload: unknown | EOD requested', progress: 80 },
          { time: 16000, cmd: 'SNIPER', msg: 'Sniper fire from compound roof - suppressing', data: 'Caliber: 7.62x54R | Range: 200m | Counter-sniper engaged', type: 'warning', progress: 85 },
          { time: 18500, cmd: 'R003', msg: 'Interrogation room - intel documents secured', data: 'Documents: 15 pages | Language: Arabic | Classification: SECRET', progress: 95 },
          { time: 21000, cmd: 'EVAC', msg: 'Extraction point reached - mission complete', data: 'Casualties: 0 KIA, 2 WIA | Intel recovered | Exfil: Black Hawk', type: 'success', progress: 100 }
        ]
      };

      // Control Room Diagnostic Scenario
      const controlRoomScenario = [
        { time: 0, cmd: 'INIT', msg: 'Haunted House Control System initializing...', data: 'Version: 2.3.1 | Rooms: 4 | Network: 192.168.1.0/24', type: 'success', progress: 10 },
        { time: 500, cmd: 'SCAN', msg: 'Scanning all room systems for anomalies', data: 'Rooms 1-4: Network ping | Hardware status | Sensor readings', progress: 25 },
        { time: 1200, cmd: 'R001', msg: 'Room 1 - Entrance Hall: Systems nominal', data: 'Skeleton servo: 98% health | DMX: All channels OK | PIR: Active', type: 'success', progress: 40 },
        { time: 1800, cmd: 'R002', msg: 'Room 2 - Ghost Corridor: All systems operational', data: 'Stepper motor: 94% health | LED strip: 60/60 pixels | Fog: 87% fluid', type: 'success', progress: 55 },
        { time: 2400, cmd: 'R003', msg: 'Room 3 - Chamber of Terror: CRITICAL FAULT DETECTED', data: 'Main servo controller: TIMEOUT | Error code: 0x2A7F | Backup: OFFLINE', highlight: true, type: 'error', progress: 70 },
        { time: 3000, cmd: 'DIAG', msg: 'Running deep diagnostics on Room 3 hardware', data: 'Power supply: 11.8V (LOW) | Temperature: 67°C (HIGH) | Load current: 4.2A', type: 'warning', progress: 75 },
        { time: 3800, cmd: 'FIX1', msg: 'Attempting servo controller reset...', data: 'Reset sequence initiated | Waiting for boot response...', progress: 80 },
        { time: 4500, cmd: 'FIX2', msg: 'Controller reset failed. Switching to backup unit', data: 'Backup controller: Activating | Servo calibration required', type: 'warning', progress: 85 },
        { time: 5200, cmd: 'CAL', msg: 'Calibrating backup servo positions', data: 'Home position set | Range of motion: 0-180° | Torque limit: 3.0kg-cm', progress: 90 },
        { time: 5800, cmd: 'TEST', msg: 'Testing Room 3 functionality with backup system', data: 'Movement test: PASS | Audio sync: PASS | Safety limits: PASS', progress: 95 },
        { time: 6400, cmd: 'RESOLVED', msg: 'Room 3 operational on backup controller', data: 'Performance: 85% nominal | Recommend main controller replacement', type: 'success', progress: 100 },
        { time: 7000, cmd: 'STATUS', msg: 'All rooms now operational. Control room monitoring active.', data: 'Total uptime: 99.2% | Next maintenance: 72 hours', type: 'success' }
      ];

      let activeDemo = null;
      let demoTimeout = null;
      let controlRoomActive = false;
      let controlTimeout = null;
      let streamingActive = false;
      let streamingIntervals = [];

      // Start streaming data on page load
      document.addEventListener('DOMContentLoaded', function() {
        startDataStreaming();
        initPowerGraph();
      });

      function startDataStreaming() {
        if (streamingActive) return;
        streamingActive = true;

        // Stream data for Feed 1 (Entrance)
        streamingIntervals.push(setInterval(() => {
          const feed1 = document.getElementById('feed1');
          if (feed1) {
            const motion = Math.random() > 0.8 ? 'DETECTED' : 'CLEAR';
            const light = Math.floor(80 + Math.random() * 20);
            const audio = Math.floor(-15 + Math.random() * 8);
            
            feed1.innerHTML = `
              <div class="feed-data">
                <div class="data-line">MOTION: <span class="value-${motion === 'CLEAR' ? 'good' : 'error'}">${motion}</span></div>
                <div class="data-line">LIGHT: <span class="value-normal">${light}%</span></div>
                <div class="data-line">AUDIO: <span class="value-good">${audio}dB</span></div>
              </div>
            `;
          }
        }, 2000));

        // Stream data for Feed 4 (Chamber Robot)
        streamingIntervals.push(setInterval(() => {
          const feed4 = document.getElementById('feed4');
          if (feed4) {
            const temp = Math.floor(68 + Math.random() * 8);
            const tempClass = temp > 70 ? 'error' : temp > 65 ? 'warning' : 'normal';
            
            feed4.innerHTML = `
              <div class="feed-data">
                <div class="data-line">STATUS: <span class="value-error">FAULT</span></div>
                <div class="data-line">TEMP: <span class="value-${tempClass}">${temp}°C</span></div>
                <div class="data-line">SERVO: <span class="value-error">TIMEOUT</span></div>
              </div>
            `;
          }
        }, 1500));

        // Update power stats
        streamingIntervals.push(setInterval(() => {
          const powerLoad = document.getElementById('powerLoad');
          const powerFreq = document.getElementById('powerFreq');
          if (powerLoad && powerFreq) {
            powerLoad.textContent = Math.floor(60 + Math.random() * 20) + '%';
            powerFreq.textContent = (59.8 + Math.random() * 0.4).toFixed(1) + 'Hz';
          }
        }, 3000));
      }

      function initPowerGraph() {
        const canvas = document.getElementById('powerGraph');
        if (!canvas) return;
        
        const ctx = canvas.getContext('2d');
        let dataPoints = Array(60).fill(0).map(() => Math.random() * 0.5 + 0.5);
        
        function drawGraph() {
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          
          // Add new data point
          dataPoints.push(Math.random() * 0.3 + 0.6);
          dataPoints.shift();
          
          // Draw grid
          ctx.strokeStyle = '#333';
          ctx.lineWidth = 1;
          for (let i = 0; i < 6; i++) {
            const y = (i * canvas.height) / 5;
            ctx.beginPath();
            ctx.moveTo(0, y);
            ctx.lineTo(canvas.width, y);
            ctx.stroke();
          }
          
          // Draw power curve
          ctx.strokeStyle = '#00ff88';
          ctx.lineWidth = 2;
          ctx.beginPath();
          
          for (let i = 0; i < dataPoints.length; i++) {
            const x = (i * canvas.width) / (dataPoints.length - 1);
            const y = canvas.height - (dataPoints[i] * canvas.height);
            
            if (i === 0) {
              ctx.moveTo(x, y);
            } else {
              ctx.lineTo(x, y);
            }
          }
          ctx.stroke();
        }
        
        // Update graph every second
        streamingIntervals.push(setInterval(drawGraph, 1000));
        drawGraph(); // Initial draw
      }

      function runDemo(type) {
        if (activeDemo) stopDemo(activeDemo);
        activeDemo = type;
        
        const output = document.getElementById(type + '-output');
        output.innerHTML = '';
        
        const scenario = demoScenarios[type];
        let stepIndex = 0;
        
        function runNextStep() {
          if (stepIndex >= scenario.length || activeDemo !== type) return;
          
          const step = scenario[stepIndex];
          const timestamp = (step.time / 1000).toFixed(2).padStart(6, ' ');
          
          // Determine CSS classes based on step properties
          let cssClasses = 'log-entry';
          if (step.highlight) cssClasses += ' log-warning';
          if (step.type === 'success') cssClasses += ' log-success';
          if (step.type === 'warning') cssClasses += ' log-warning';
          if (step.type === 'error') cssClasses += ' log-error';
          
          // Build the log entry HTML
          let logHtml = `<div class="${cssClasses}">
            <span class="log-timestamp">[${timestamp}s]</span> 
            <span class="log-command">${step.cmd.padEnd(8)}</span> 
            ${step.msg}`;
          
          // Add technical data if available
          if (step.data) {
            logHtml += `<br><span class="log-data">    └─ ${step.data}</span>`;
          }
          
          // Add progress bar if available
          if (step.progress !== undefined) {
            logHtml += `<div class="progress-bar"><div class="progress-fill" style="width: ${step.progress}%"></div></div>`;
          }
          
          logHtml += '</div>';
          
          output.innerHTML += logHtml;
          
          // Enhanced scrolling with multiple methods to ensure it works
          requestAnimationFrame(() => {
            const container = output;
            container.scrollTop = container.scrollHeight;
            
            // Also try scrolling the last element into view
            const lastEntry = container.lastElementChild;
            if (lastEntry) {
              lastEntry.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }
          });
          
          stepIndex++;
          
          if (stepIndex < scenario.length) {
            const nextDelay = scenario[stepIndex].time - step.time;
            demoTimeout = setTimeout(runNextStep, nextDelay);
          } else {
            setTimeout(() => {
              if (activeDemo === type) {
                output.innerHTML += '<div class="log-entry log-success">✓ Sequence complete. Ready for next run...</div>';
                // Enhanced scrolling for completion message
                requestAnimationFrame(() => {
                  output.scrollTop = output.scrollHeight;
                  const lastEntry = output.lastElementChild;
                  if (lastEntry) {
                    lastEntry.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                  }
                });
                activeDemo = null;
              }
            }, 500);
          }
        }
        
        runNextStep();
      }

      function stopDemo(type) {
        if (activeDemo === type) {
          activeDemo = null;
          clearTimeout(demoTimeout);
          const output = document.getElementById(type + '-output');
          output.innerHTML += '<div class="log-entry log-error">⚠️ EMERGENCY STOP - All systems halted</div>';
          // Enhanced scrolling for stop message
          requestAnimationFrame(() => {
            output.scrollTop = output.scrollHeight;
            const lastEntry = output.lastElementChild;
            if (lastEntry) {
              lastEntry.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }
          });
        }
      }

      function runControlRoom() {
        if (controlRoomActive) return;
        controlRoomActive = true;
        
        const output = document.getElementById('control-output');
        output.innerHTML = '';
        
        // Update room status during diagnostic
        setTimeout(() => {
          document.getElementById('room3').className = 'room-status room-error';
          document.getElementById('room3').querySelector('.room-info').textContent = 'DIAGNOSING SERVO FAULT...';
        }, 2400);
        
        setTimeout(() => {
          document.getElementById('room3').className = 'room-status room-maintenance';
          document.getElementById('room3').querySelector('.room-info').textContent = 'Backup Controller Active';
          document.getElementById('room3').querySelector('.status-light').className = 'status-light yellow';
        }, 5200);
        
        setTimeout(() => {
          document.getElementById('room3').className = 'room-status room-ok';
          document.getElementById('room3').querySelector('.room-info').textContent = 'Backup System: OPERATIONAL';
          document.getElementById('room3').querySelector('.status-light').className = 'status-light green';
        }, 6400);
        
        let stepIndex = 0;
        
        function runNextStep() {
          if (stepIndex >= controlRoomScenario.length || !controlRoomActive) return;
          
          const step = controlRoomScenario[stepIndex];
          const timestamp = (step.time / 1000).toFixed(2).padStart(6, ' ');
          
          let cssClasses = 'log-entry';
          if (step.highlight) cssClasses += ' log-warning';
          if (step.type === 'success') cssClasses += ' log-success';
          if (step.type === 'warning') cssClasses += ' log-warning';
          if (step.type === 'error') cssClasses += ' log-error';
          
          let logHtml = `<div class="${cssClasses}">
            <span class="log-timestamp">[${timestamp}s]</span> 
            <span class="log-command">${step.cmd.padEnd(8)}</span> 
            ${step.msg}`;
          
          if (step.data) {
            logHtml += `<br><span class="log-data">    └─ ${step.data}</span>`;
          }
          
          if (step.progress !== undefined) {
            logHtml += `<div class="progress-bar"><div class="progress-fill" style="width: ${step.progress}%"></div></div>`;
          }
          
          logHtml += '</div>';
          
          output.innerHTML += logHtml;
          
          // Force scroll to bottom after adding content
          setTimeout(() => {
            output.scrollTop = output.scrollHeight;
          }, 10);
          
          stepIndex++;
          
          if (stepIndex < controlRoomScenario.length) {
            const nextDelay = controlRoomScenario[stepIndex].time - step.time;
            controlTimeout = setTimeout(runNextStep, nextDelay);
          } else {
            setTimeout(() => {
              if (controlRoomActive) {
                output.innerHTML += '<div class="log-entry log-success">✓ Diagnostic complete. All systems monitored.</div>';
                setTimeout(() => {
                  output.scrollTop = output.scrollHeight;
                }, 10);
                controlRoomActive = false;
              }
            }, 500);
          }
        }
        
        runNextStep();
      }

      function stopControlRoom() {
        if (controlRoomActive) {
          controlRoomActive = false;
          clearTimeout(controlTimeout);
          const output = document.getElementById('control-output');
          output.innerHTML += '<div class="log-entry log-error">🛑 Diagnostic aborted - Control room standing by</div>';
          setTimeout(() => {
            output.scrollTop = output.scrollHeight;
          }, 10);
          
          // Reset room statuses
          setTimeout(() => {
            document.getElementById('room3').className = 'room-status room-error';
            document.getElementById('room3').querySelector('.room-info').textContent = 'SERVO FAULT - BACKUP ACTIVE';
            document.getElementById('room3').querySelector('.status-light').className = 'status-light red';
          }, 1000);
        }
      }

      function resetSystems() {
        // Stop all running demos and control room
        if (activeDemo) stopDemo(activeDemo);
        if (controlRoomActive) stopControlRoom();
        
        // Reset all terminals
        const terminals = ['skeleton-output', 'ghost-output', 'effects-output', 'combat-output', 'control-output'];
        terminals.forEach(id => {
          const output = document.getElementById(id);
          if (output) {
            output.innerHTML = output.id === 'control-output' ? 
              'Systems reset. All terminals cleared. Ready for new operations...' :
              'Ready. Press START to begin...';
          }
        });
        
        // Reset room statuses to original state
        setTimeout(() => {
          document.getElementById('room1').className = 'room-status room-ok';
          document.getElementById('room2').className = 'room-status room-ok';
          document.getElementById('room3').className = 'room-status room-error';
          document.getElementById('room3').querySelector('.room-info').textContent = 'SERVO FAULT - BACKUP ACTIVE';
          document.getElementById('room3').querySelector('.status-light').className = 'status-light red';
          document.getElementById('room4').className = 'room-status room-maintenance';
        }, 500);
      }

      function viewEscapeRoomScript() {
        const scriptPanel = document.getElementById('scriptPanel');
        if (scriptPanel.style.display === 'none') {
          scriptPanel.style.display = 'block';
        } else {
          scriptPanel.style.display = 'none';
        }
      }

      function downloadEscapeRoomCode() {
        // Create a link to download the escape room code
        const link = document.createElement('a');
        link.href = 'https://raw.githubusercontent.com/HannnibalKing/Haunted-House-Robotics-DMX/main/combat_escape_room/escape_room_controller.js';
        link.download = 'combat_escape_room_controller.js';
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
      }

      function viewGitHubRepo() {
        window.open('https://github.com/HannnibalKing/Haunted-House-Robotics-DMX/tree/main/combat_escape_room', '_blank');
      }
    </script>
  </body>
</html>
